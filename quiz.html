<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Study Spot Finder</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src = "./main.js"></script>
</head>

<body>
    <div class="question-container">
        <div class="question">gfdgfd</div>
        <div class="buttons">
            <button id="left" onclick="answerQuestion(false)">gfdg</button>
            <button id="skip" onclick="answerQuestion(null)">Skip</button>
            <button id="right" onclick="answerQuestion(true)">gfdgfd</button>
        </div>
    </div>

    <button id="backButton" onclick="goBack()">Back</button>

    <script>
        let question_id = 1;
        

        function goBack() {
            question_id = question_id - 1;
            renderQuestion();
        }
        function triggerButton(buttonId) {
            const button = document.getElementById(buttonId);
            button.style.backgroundColor = "green"; 
            setTimeout(() => {
                button.style.backgroundColor = ""; 
                button.click();
            }, 1000);
        }

        function answerQuestion(answer) {
            console.log(`Answered Question ${question_id}: ${answer}`);
            console.log(answers[`Q${question_id}`] = answer);

            ++question_id;

            if (question_id === totalQuestions) {
                const result = getResult()
                window.location.href = `result.html?loc=${encodeURIComponent(result)}`;
            } else {
                renderQuestion()    
            }       

        }

        function renderQuestion() {
            const question = questions.find(q => q.id === question_id);   
            const questionTextElement = document.querySelector('.question');
            questionTextElement.innerHTML = question.text;

            document.getElementById("left").textContent = question.left;
            document.getElementById("right").textContent = question.right;
        }

        renderQuestion(0)

        const gestureRecognition = new GestureRecognition(
            "cpsc484-04.stdusr.yale.internal:8888",
            () => { triggerButton('right'); },
            () => { triggerButton('left'); },
            () => { triggerButton('skip'); }
        );
        gestureRecognition.startConnection();
        
            // $("#backButton").hide(); // Initially hide the back button
            // $('#backButton').click(function () {
            //     // if (currentQuestion > 1) {
            //     //     showQuestion(currentQuestion - 1);
            //     // }
            // })

    </script>
</body>

</html>